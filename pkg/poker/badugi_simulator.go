package poker

import (
	"fmt"
	"sort"
	"strings"
)

// Cardが現在の定義では正しく動かない点に注意
// CardをA始まりで定義し直せばOK
func SimulateBadugiEquity(my4 []Card, iters int) float64 {
	potWins := 0.0

	for i := 0; i < iters; i++ {
		deck := RemoveCards(FullDeck(), ToSet(my4))

		// Deal opponent hand
		opp4, _ := DrawRandom(deck, 4)

		my4Final, opp4Final := changeForBadugi(my4, opp4)

		rankMy4Final, _ := GetBadugiRank(my4Final)
		rankOpp4Final, _ := GetBadugiRank(opp4Final)

		if rankMy4Final < rankOpp4Final {
			potWins += 1.0
		} else if rankMy4Final == rankOpp4Final {
			potWins += 0.5
		}
	}

	equity := potWins / float64(iters)
	return equity
}

func GetBadugiRank(cards []Card) (int, error) {
	c, err := ExtractValidBadugiCards(cards)
	if err != nil {
		return 0, err
	}

	key, err := cardsToBadugiKey(c)
	if err != nil {
		return 0, err
	}

	rank, ok := BadugiRanking[key]
	if !ok {
		return 0, fmt.Errorf("hand %v (key: %s) not found in ranking", cards, key)
	}
	return rank, nil
}

// for GetBadugiRank() & changeForBadugi()
func ExtractValidBadugiCards(cards []Card) ([]Card, error) {
	if len(cards) != 4 {
		return nil, fmt.Errorf("need 4 cards, got %d", len(cards))
	}

	sort.Slice(cards, func(i, j int) bool {
		return cards[i].Rank() < cards[j].Rank()
	})

	usedRanks := map[int]struct{}{}
	usedSuits := map[int]struct{}{}
	var valid []Card

	for _, c := range cards {
		r, s := c.Rank(), c.Suit()
		if _, ok := usedRanks[r]; ok {
			continue
		}
		if _, ok := usedSuits[s]; ok {
			continue
		}
		usedRanks[r] = struct{}{}
		usedSuits[s] = struct{}{}
		valid = append(valid, c)
	}

	return valid, nil
}

// for GetBadugiRank()
func cardsToBadugiKey(cards []Card) (string, error) {
	valid, err := ExtractValidBadugiCards(cards)
	if err != nil {
		return "", err
	}

	var parts []string
	for _, c := range valid {
		parts = append(parts, rankToChar[c.Rank()])
	}

	return strings.Join(parts, ""), nil
}

func changeForBadugi(my4 []Card, opp4 []Card) ([]Card, []Card) {
	// 使用カードを除いてデッキ構築
	used := ToSet(append(my4, opp4...))
	deck := RemoveCards(FullDeck(), used)

	for round := 0; round < 3; round++ {
		// 自分と相手の有効カード（バドゥギ構成）を抽出
		myValid, _ := ExtractValidBadugiCards(my4)
		oppValid, _ := ExtractValidBadugiCards(opp4)

		if len(myValid) < 4 {
			my4 = doChange(my4, myValid, &deck)
		}
		if len(oppValid) < 4 {
			opp4 = doChange(opp4, oppValid, &deck)
		}
	}

	return my4, opp4
}

func doChange(hand []Card, valid []Card, deck *[]Card) []Card {
	// 現在の手札をセットで扱って交換対象を抽出
	validSet := ToSet(valid)
	var toChange []Card
	for _, c := range hand {
		if _, ok := validSet[c]; !ok {
			toChange = append(toChange, c)
		}
	}

	// 新しいカードを引く
	newCards, rest := DrawRandom(*deck, len(toChange))
	*deck = rest

	// 新旧手札を統合
	var newHand []Card
	newHand = append(valid, newCards...)
	return newHand
}

var BadugiRanking = map[string]int{
	"A234": 1,
	"A235": 2,
	"A245": 3,
	"A345": 4,
	"2345": 5,
	"A236": 6,
	"A246": 7,
	"A346": 8,
	"2346": 9,
	"A256": 10,
	"A356": 11,
	"2356": 12,
	"A456": 13,
	"2456": 14,
	"3456": 15,
	"A237": 16,
	"A247": 17,
	"A347": 18,
	"2347": 19,
	"A257": 20,
	"A357": 21,
	"2357": 22,
	"A457": 23,
	"2457": 24,
	"3457": 25,
	"A267": 26,
	"A367": 27,
	"2367": 28,
	"A467": 29,
	"2467": 30,
	"3467": 31,
	"A567": 32,
	"2567": 33,
	"3567": 34,
	"4567": 35,
	"A238": 36,
	"A248": 37,
	"A348": 38,
	"2348": 39,
	"A258": 40,
	"A358": 41,
	"2358": 42,
	"A458": 43,
	"2458": 44,
	"3458": 45,
	"A268": 46,
	"A368": 47,
	"2368": 48,
	"A468": 49,
	"2468": 50,
	"3468": 51,
	"A568": 52,
	"2568": 53,
	"3568": 54,
	"4568": 55,
	"A278": 56,
	"A378": 57,
	"2378": 58,
	"A478": 59,
	"2478": 60,
	"3478": 61,
	"A578": 62,
	"2578": 63,
	"3578": 64,
	"4578": 65,
	"A678": 66,
	"2678": 67,
	"3678": 68,
	"4678": 69,
	"5678": 70,
	"A239": 71,
	"A249": 72,
	"A349": 73,
	"2349": 74,
	"A259": 75,
	"A359": 76,
	"2359": 77,
	"A459": 78,
	"2459": 79,
	"3459": 80,
	"A269": 81,
	"A369": 82,
	"2369": 83,
	"A469": 84,
	"2469": 85,
	"3469": 86,
	"A569": 87,
	"2569": 88,
	"3569": 89,
	"4569": 90,
	"A279": 91,
	"A379": 92,
	"2379": 93,
	"A479": 94,
	"2479": 95,
	"3479": 96,
	"A579": 97,
	"2579": 98,
	"3579": 99,
	"4579": 100,
	"A679": 101,
	"2679": 102,
	"3679": 103,
	"4679": 104,
	"5679": 105,
	"A289": 106,
	"A389": 107,
	"2389": 108,
	"A489": 109,
	"2489": 110,
	"3489": 111,
	"A589": 112,
	"2589": 113,
	"3589": 114,
	"4589": 115,
	"A689": 116,
	"2689": 117,
	"3689": 118,
	"4689": 119,
	"5689": 120,
	"A789": 121,
	"2789": 122,
	"3789": 123,
	"4789": 124,
	"5789": 125,
	"6789": 126,
	"A23T": 127,
	"A24T": 128,
	"A34T": 129,
	"234T": 130,
	"A25T": 131,
	"A35T": 132,
	"235T": 133,
	"A45T": 134,
	"245T": 135,
	"345T": 136,
	"A26T": 137,
	"A36T": 138,
	"236T": 139,
	"A46T": 140,
	"246T": 141,
	"346T": 142,
	"A56T": 143,
	"256T": 144,
	"356T": 145,
	"456T": 146,
	"A27T": 147,
	"A37T": 148,
	"237T": 149,
	"A47T": 150,
	"247T": 151,
	"347T": 152,
	"A57T": 153,
	"257T": 154,
	"357T": 155,
	"457T": 156,
	"A67T": 157,
	"267T": 158,
	"367T": 159,
	"467T": 160,
	"567T": 161,
	"A28T": 162,
	"A38T": 163,
	"238T": 164,
	"A48T": 165,
	"248T": 166,
	"348T": 167,
	"A58T": 168,
	"258T": 169,
	"358T": 170,
	"458T": 171,
	"A68T": 172,
	"268T": 173,
	"368T": 174,
	"468T": 175,
	"568T": 176,
	"A78T": 177,
	"278T": 178,
	"378T": 179,
	"478T": 180,
	"578T": 181,
	"678T": 182,
	"A29T": 183,
	"A39T": 184,
	"239T": 185,
	"A49T": 186,
	"249T": 187,
	"349T": 188,
	"A59T": 189,
	"259T": 190,
	"359T": 191,
	"459T": 192,
	"A69T": 193,
	"269T": 194,
	"369T": 195,
	"469T": 196,
	"569T": 197,
	"A79T": 198,
	"279T": 199,
	"379T": 200,
	"479T": 201,
	"579T": 202,
	"679T": 203,
	"A89T": 204,
	"289T": 205,
	"389T": 206,
	"489T": 207,
	"589T": 208,
	"689T": 209,
	"789T": 210,
	"A23J": 211,
	"A24J": 212,
	"A34J": 213,
	"234J": 214,
	"A25J": 215,
	"A35J": 216,
	"235J": 217,
	"A45J": 218,
	"245J": 219,
	"345J": 220,
	"A26J": 221,
	"A36J": 222,
	"236J": 223,
	"A46J": 224,
	"246J": 225,
	"346J": 226,
	"A56J": 227,
	"256J": 228,
	"356J": 229,
	"456J": 230,
	"A27J": 231,
	"A37J": 232,
	"237J": 233,
	"A47J": 234,
	"247J": 235,
	"347J": 236,
	"A57J": 237,
	"257J": 238,
	"357J": 239,
	"457J": 240,
	"A67J": 241,
	"267J": 242,
	"367J": 243,
	"467J": 244,
	"567J": 245,
	"A28J": 246,
	"A38J": 247,
	"238J": 248,
	"A48J": 249,
	"248J": 250,
	"348J": 251,
	"A58J": 252,
	"258J": 253,
	"358J": 254,
	"458J": 255,
	"A68J": 256,
	"268J": 257,
	"368J": 258,
	"468J": 259,
	"568J": 260,
	"A78J": 261,
	"278J": 262,
	"378J": 263,
	"478J": 264,
	"578J": 265,
	"678J": 266,
	"A29J": 267,
	"A39J": 268,
	"239J": 269,
	"A49J": 270,
	"249J": 271,
	"349J": 272,
	"A59J": 273,
	"259J": 274,
	"359J": 275,
	"459J": 276,
	"A69J": 277,
	"269J": 278,
	"369J": 279,
	"469J": 280,
	"569J": 281,
	"A79J": 282,
	"279J": 283,
	"379J": 284,
	"479J": 285,
	"579J": 286,
	"679J": 287,
	"A89J": 288,
	"289J": 289,
	"389J": 290,
	"489J": 291,
	"589J": 292,
	"689J": 293,
	"789J": 294,
	"A2TJ": 295,
	"A3TJ": 296,
	"23TJ": 297,
	"A4TJ": 298,
	"24TJ": 299,
	"34TJ": 300,
	"A5TJ": 301,
	"25TJ": 302,
	"35TJ": 303,
	"45TJ": 304,
	"A6TJ": 305,
	"26TJ": 306,
	"36TJ": 307,
	"46TJ": 308,
	"56TJ": 309,
	"A7TJ": 310,
	"27TJ": 311,
	"37TJ": 312,
	"47TJ": 313,
	"57TJ": 314,
	"67TJ": 315,
	"A8TJ": 316,
	"28TJ": 317,
	"38TJ": 318,
	"48TJ": 319,
	"58TJ": 320,
	"68TJ": 321,
	"78TJ": 322,
	"A9TJ": 323,
	"29TJ": 324,
	"39TJ": 325,
	"49TJ": 326,
	"59TJ": 327,
	"69TJ": 328,
	"79TJ": 329,
	"89TJ": 330,
	"A23Q": 331,
	"A24Q": 332,
	"A34Q": 333,
	"234Q": 334,
	"A25Q": 335,
	"A35Q": 336,
	"235Q": 337,
	"A45Q": 338,
	"245Q": 339,
	"345Q": 340,
	"A26Q": 341,
	"A36Q": 342,
	"236Q": 343,
	"A46Q": 344,
	"246Q": 345,
	"346Q": 346,
	"A56Q": 347,
	"256Q": 348,
	"356Q": 349,
	"456Q": 350,
	"A27Q": 351,
	"A37Q": 352,
	"237Q": 353,
	"A47Q": 354,
	"247Q": 355,
	"347Q": 356,
	"A57Q": 357,
	"257Q": 358,
	"357Q": 359,
	"457Q": 360,
	"A67Q": 361,
	"267Q": 362,
	"367Q": 363,
	"467Q": 364,
	"567Q": 365,
	"A28Q": 366,
	"A38Q": 367,
	"238Q": 368,
	"A48Q": 369,
	"248Q": 370,
	"348Q": 371,
	"A58Q": 372,
	"258Q": 373,
	"358Q": 374,
	"458Q": 375,
	"A68Q": 376,
	"268Q": 377,
	"368Q": 378,
	"468Q": 379,
	"568Q": 380,
	"A78Q": 381,
	"278Q": 382,
	"378Q": 383,
	"478Q": 384,
	"578Q": 385,
	"678Q": 386,
	"A29Q": 387,
	"A39Q": 388,
	"239Q": 389,
	"A49Q": 390,
	"249Q": 391,
	"349Q": 392,
	"A59Q": 393,
	"259Q": 394,
	"359Q": 395,
	"459Q": 396,
	"A69Q": 397,
	"269Q": 398,
	"369Q": 399,
	"469Q": 400,
	"569Q": 401,
	"A79Q": 402,
	"279Q": 403,
	"379Q": 404,
	"479Q": 405,
	"579Q": 406,
	"679Q": 407,
	"A89Q": 408,
	"289Q": 409,
	"389Q": 410,
	"489Q": 411,
	"589Q": 412,
	"689Q": 413,
	"789Q": 414,
	"A2TQ": 415,
	"A3TQ": 416,
	"23TQ": 417,
	"A4TQ": 418,
	"24TQ": 419,
	"34TQ": 420,
	"A5TQ": 421,
	"25TQ": 422,
	"35TQ": 423,
	"45TQ": 424,
	"A6TQ": 425,
	"26TQ": 426,
	"36TQ": 427,
	"46TQ": 428,
	"56TQ": 429,
	"A7TQ": 430,
	"27TQ": 431,
	"37TQ": 432,
	"47TQ": 433,
	"57TQ": 434,
	"67TQ": 435,
	"A8TQ": 436,
	"28TQ": 437,
	"38TQ": 438,
	"48TQ": 439,
	"58TQ": 440,
	"68TQ": 441,
	"78TQ": 442,
	"A9TQ": 443,
	"29TQ": 444,
	"39TQ": 445,
	"49TQ": 446,
	"59TQ": 447,
	"69TQ": 448,
	"79TQ": 449,
	"89TQ": 450,
	"A2JQ": 451,
	"A3JQ": 452,
	"23JQ": 453,
	"A4JQ": 454,
	"24JQ": 455,
	"34JQ": 456,
	"A5JQ": 457,
	"25JQ": 458,
	"35JQ": 459,
	"45JQ": 460,
	"A6JQ": 461,
	"26JQ": 462,
	"36JQ": 463,
	"46JQ": 464,
	"56JQ": 465,
	"A7JQ": 466,
	"27JQ": 467,
	"37JQ": 468,
	"47JQ": 469,
	"57JQ": 470,
	"67JQ": 471,
	"A8JQ": 472,
	"28JQ": 473,
	"38JQ": 474,
	"48JQ": 475,
	"58JQ": 476,
	"68JQ": 477,
	"78JQ": 478,
	"A9JQ": 479,
	"29JQ": 480,
	"39JQ": 481,
	"49JQ": 482,
	"59JQ": 483,
	"69JQ": 484,
	"79JQ": 485,
	"89JQ": 486,
	"ATJQ": 487,
	"2TJQ": 488,
	"3TJQ": 489,
	"4TJQ": 490,
	"5TJQ": 491,
	"6TJQ": 492,
	"7TJQ": 493,
	"8TJQ": 494,
	"9TJQ": 495,
	"A23K": 496,
	"A24K": 497,
	"A34K": 498,
	"234K": 499,
	"A25K": 500,
	"A35K": 501,
	"235K": 502,
	"A45K": 503,
	"245K": 504,
	"345K": 505,
	"A26K": 506,
	"A36K": 507,
	"236K": 508,
	"A46K": 509,
	"246K": 510,
	"346K": 511,
	"A56K": 512,
	"256K": 513,
	"356K": 514,
	"456K": 515,
	"A27K": 516,
	"A37K": 517,
	"237K": 518,
	"A47K": 519,
	"247K": 520,
	"347K": 521,
	"A57K": 522,
	"257K": 523,
	"357K": 524,
	"457K": 525,
	"A67K": 526,
	"267K": 527,
	"367K": 528,
	"467K": 529,
	"567K": 530,
	"A28K": 531,
	"A38K": 532,
	"238K": 533,
	"A48K": 534,
	"248K": 535,
	"348K": 536,
	"A58K": 537,
	"258K": 538,
	"358K": 539,
	"458K": 540,
	"A68K": 541,
	"268K": 542,
	"368K": 543,
	"468K": 544,
	"568K": 545,
	"A78K": 546,
	"278K": 547,
	"378K": 548,
	"478K": 549,
	"578K": 550,
	"678K": 551,
	"A29K": 552,
	"A39K": 553,
	"239K": 554,
	"A49K": 555,
	"249K": 556,
	"349K": 557,
	"A59K": 558,
	"259K": 559,
	"359K": 560,
	"459K": 561,
	"A69K": 562,
	"269K": 563,
	"369K": 564,
	"469K": 565,
	"569K": 566,
	"A79K": 567,
	"279K": 568,
	"379K": 569,
	"479K": 570,
	"579K": 571,
	"679K": 572,
	"A89K": 573,
	"289K": 574,
	"389K": 575,
	"489K": 576,
	"589K": 577,
	"689K": 578,
	"789K": 579,
	"A2TK": 580,
	"A3TK": 581,
	"23TK": 582,
	"A4TK": 583,
	"24TK": 584,
	"34TK": 585,
	"A5TK": 586,
	"25TK": 587,
	"35TK": 588,
	"45TK": 589,
	"A6TK": 590,
	"26TK": 591,
	"36TK": 592,
	"46TK": 593,
	"56TK": 594,
	"A7TK": 595,
	"27TK": 596,
	"37TK": 597,
	"47TK": 598,
	"57TK": 599,
	"67TK": 600,
	"A8TK": 601,
	"28TK": 602,
	"38TK": 603,
	"48TK": 604,
	"58TK": 605,
	"68TK": 606,
	"78TK": 607,
	"A9TK": 608,
	"29TK": 609,
	"39TK": 610,
	"49TK": 611,
	"59TK": 612,
	"69TK": 613,
	"79TK": 614,
	"89TK": 615,
	"A2JK": 616,
	"A3JK": 617,
	"23JK": 618,
	"A4JK": 619,
	"24JK": 620,
	"34JK": 621,
	"A5JK": 622,
	"25JK": 623,
	"35JK": 624,
	"45JK": 625,
	"A6JK": 626,
	"26JK": 627,
	"36JK": 628,
	"46JK": 629,
	"56JK": 630,
	"A7JK": 631,
	"27JK": 632,
	"37JK": 633,
	"47JK": 634,
	"57JK": 635,
	"67JK": 636,
	"A8JK": 637,
	"28JK": 638,
	"38JK": 639,
	"48JK": 640,
	"58JK": 641,
	"68JK": 642,
	"78JK": 643,
	"A9JK": 644,
	"29JK": 645,
	"39JK": 646,
	"49JK": 647,
	"59JK": 648,
	"69JK": 649,
	"79JK": 650,
	"89JK": 651,
	"ATJK": 652,
	"2TJK": 653,
	"3TJK": 654,
	"4TJK": 655,
	"5TJK": 656,
	"6TJK": 657,
	"7TJK": 658,
	"8TJK": 659,
	"9TJK": 660,
	"A2QK": 661,
	"A3QK": 662,
	"23QK": 663,
	"A4QK": 664,
	"24QK": 665,
	"34QK": 666,
	"A5QK": 667,
	"25QK": 668,
	"35QK": 669,
	"45QK": 670,
	"A6QK": 671,
	"26QK": 672,
	"36QK": 673,
	"46QK": 674,
	"56QK": 675,
	"A7QK": 676,
	"27QK": 677,
	"37QK": 678,
	"47QK": 679,
	"57QK": 680,
	"67QK": 681,
	"A8QK": 682,
	"28QK": 683,
	"38QK": 684,
	"48QK": 685,
	"58QK": 686,
	"68QK": 687,
	"78QK": 688,
	"A9QK": 689,
	"29QK": 690,
	"39QK": 691,
	"49QK": 692,
	"59QK": 693,
	"69QK": 694,
	"79QK": 695,
	"89QK": 696,
	"ATQK": 697,
	"2TQK": 698,
	"3TQK": 699,
	"4TQK": 700,
	"5TQK": 701,
	"6TQK": 702,
	"7TQK": 703,
	"8TQK": 704,
	"9TQK": 705,
	"AJQK": 706,
	"2JQK": 707,
	"3JQK": 708,
	"4JQK": 709,
	"5JQK": 710,
	"6JQK": 711,
	"7JQK": 712,
	"8JQK": 713,
	"9JQK": 714,
	"TJQK": 715,
	"A23":  716,
	"A24":  717,
	"A34":  718,
	"234":  719,
	"A25":  720,
	"A35":  721,
	"235":  722,
	"A45":  723,
	"245":  724,
	"345":  725,
	"A26":  726,
	"A36":  727,
	"236":  728,
	"A46":  729,
	"246":  730,
	"346":  731,
	"A56":  732,
	"256":  733,
	"356":  734,
	"456":  735,
	"A27":  736,
	"A37":  737,
	"237":  738,
	"A47":  739,
	"247":  740,
	"347":  741,
	"A57":  742,
	"257":  743,
	"357":  744,
	"457":  745,
	"A67":  746,
	"267":  747,
	"367":  748,
	"467":  749,
	"567":  750,
	"A28":  751,
	"A38":  752,
	"238":  753,
	"A48":  754,
	"248":  755,
	"348":  756,
	"A58":  757,
	"258":  758,
	"358":  759,
	"458":  760,
	"A68":  761,
	"268":  762,
	"368":  763,
	"468":  764,
	"568":  765,
	"A78":  766,
	"278":  767,
	"378":  768,
	"478":  769,
	"578":  770,
	"678":  771,
	"A29":  772,
	"A39":  773,
	"239":  774,
	"A49":  775,
	"249":  776,
	"349":  777,
	"A59":  778,
	"259":  779,
	"359":  780,
	"459":  781,
	"A69":  782,
	"269":  783,
	"369":  784,
	"469":  785,
	"569":  786,
	"A79":  787,
	"279":  788,
	"379":  789,
	"479":  790,
	"579":  791,
	"679":  792,
	"A89":  793,
	"289":  794,
	"389":  795,
	"489":  796,
	"589":  797,
	"689":  798,
	"789":  799,
	"A2T":  800,
	"A3T":  801,
	"23T":  802,
	"A4T":  803,
	"24T":  804,
	"34T":  805,
	"A5T":  806,
	"25T":  807,
	"35T":  808,
	"45T":  809,
	"A6T":  810,
	"26T":  811,
	"36T":  812,
	"46T":  813,
	"56T":  814,
	"A7T":  815,
	"27T":  816,
	"37T":  817,
	"47T":  818,
	"57T":  819,
	"67T":  820,
	"A8T":  821,
	"28T":  822,
	"38T":  823,
	"48T":  824,
	"58T":  825,
	"68T":  826,
	"78T":  827,
	"A9T":  828,
	"29T":  829,
	"39T":  830,
	"49T":  831,
	"59T":  832,
	"69T":  833,
	"79T":  834,
	"89T":  835,
	"A2J":  836,
	"A3J":  837,
	"23J":  838,
	"A4J":  839,
	"24J":  840,
	"34J":  841,
	"A5J":  842,
	"25J":  843,
	"35J":  844,
	"45J":  845,
	"A6J":  846,
	"26J":  847,
	"36J":  848,
	"46J":  849,
	"56J":  850,
	"A7J":  851,
	"27J":  852,
	"37J":  853,
	"47J":  854,
	"57J":  855,
	"67J":  856,
	"A8J":  857,
	"28J":  858,
	"38J":  859,
	"48J":  860,
	"58J":  861,
	"68J":  862,
	"78J":  863,
	"A9J":  864,
	"29J":  865,
	"39J":  866,
	"49J":  867,
	"59J":  868,
	"69J":  869,
	"79J":  870,
	"89J":  871,
	"ATJ":  872,
	"2TJ":  873,
	"3TJ":  874,
	"4TJ":  875,
	"5TJ":  876,
	"6TJ":  877,
	"7TJ":  878,
	"8TJ":  879,
	"9TJ":  880,
	"A2Q":  881,
	"A3Q":  882,
	"23Q":  883,
	"A4Q":  884,
	"24Q":  885,
	"34Q":  886,
	"A5Q":  887,
	"25Q":  888,
	"35Q":  889,
	"45Q":  890,
	"A6Q":  891,
	"26Q":  892,
	"36Q":  893,
	"46Q":  894,
	"56Q":  895,
	"A7Q":  896,
	"27Q":  897,
	"37Q":  898,
	"47Q":  899,
	"57Q":  900,
	"67Q":  901,
	"A8Q":  902,
	"28Q":  903,
	"38Q":  904,
	"48Q":  905,
	"58Q":  906,
	"68Q":  907,
	"78Q":  908,
	"A9Q":  909,
	"29Q":  910,
	"39Q":  911,
	"49Q":  912,
	"59Q":  913,
	"69Q":  914,
	"79Q":  915,
	"89Q":  916,
	"ATQ":  917,
	"2TQ":  918,
	"3TQ":  919,
	"4TQ":  920,
	"5TQ":  921,
	"6TQ":  922,
	"7TQ":  923,
	"8TQ":  924,
	"9TQ":  925,
	"AJQ":  926,
	"2JQ":  927,
	"3JQ":  928,
	"4JQ":  929,
	"5JQ":  930,
	"6JQ":  931,
	"7JQ":  932,
	"8JQ":  933,
	"9JQ":  934,
	"TJQ":  935,
	"A2K":  936,
	"A3K":  937,
	"23K":  938,
	"A4K":  939,
	"24K":  940,
	"34K":  941,
	"A5K":  942,
	"25K":  943,
	"35K":  944,
	"45K":  945,
	"A6K":  946,
	"26K":  947,
	"36K":  948,
	"46K":  949,
	"56K":  950,
	"A7K":  951,
	"27K":  952,
	"37K":  953,
	"47K":  954,
	"57K":  955,
	"67K":  956,
	"A8K":  957,
	"28K":  958,
	"38K":  959,
	"48K":  960,
	"58K":  961,
	"68K":  962,
	"78K":  963,
	"A9K":  964,
	"29K":  965,
	"39K":  966,
	"49K":  967,
	"59K":  968,
	"69K":  969,
	"79K":  970,
	"89K":  971,
	"ATK":  972,
	"2TK":  973,
	"3TK":  974,
	"4TK":  975,
	"5TK":  976,
	"6TK":  977,
	"7TK":  978,
	"8TK":  979,
	"9TK":  980,
	"AJK":  981,
	"2JK":  982,
	"3JK":  983,
	"4JK":  984,
	"5JK":  985,
	"6JK":  986,
	"7JK":  987,
	"8JK":  988,
	"9JK":  989,
	"TJK":  990,
	"AQK":  991,
	"2QK":  992,
	"3QK":  993,
	"4QK":  994,
	"5QK":  995,
	"6QK":  996,
	"7QK":  997,
	"8QK":  998,
	"9QK":  999,
	"TQK":  1000,
	"JQK":  1001,
	"A2":   1002,
	"A3":   1003,
	"23":   1004,
	"A4":   1005,
	"24":   1006,
	"34":   1007,
	"A5":   1008,
	"25":   1009,
	"35":   1010,
	"45":   1011,
	"A6":   1012,
	"26":   1013,
	"36":   1014,
	"46":   1015,
	"56":   1016,
	"A7":   1017,
	"27":   1018,
	"37":   1019,
	"47":   1020,
	"57":   1021,
	"67":   1022,
	"A8":   1023,
	"28":   1024,
	"38":   1025,
	"48":   1026,
	"58":   1027,
	"68":   1028,
	"78":   1029,
	"A9":   1030,
	"29":   1031,
	"39":   1032,
	"49":   1033,
	"59":   1034,
	"69":   1035,
	"79":   1036,
	"89":   1037,
	"AT":   1038,
	"2T":   1039,
	"3T":   1040,
	"4T":   1041,
	"5T":   1042,
	"6T":   1043,
	"7T":   1044,
	"8T":   1045,
	"9T":   1046,
	"AJ":   1047,
	"2J":   1048,
	"3J":   1049,
	"4J":   1050,
	"5J":   1051,
	"6J":   1052,
	"7J":   1053,
	"8J":   1054,
	"9J":   1055,
	"TJ":   1056,
	"AQ":   1057,
	"2Q":   1058,
	"3Q":   1059,
	"4Q":   1060,
	"5Q":   1061,
	"6Q":   1062,
	"7Q":   1063,
	"8Q":   1064,
	"9Q":   1065,
	"TQ":   1066,
	"JQ":   1067,
	"AK":   1068,
	"2K":   1069,
	"3K":   1070,
	"4K":   1071,
	"5K":   1072,
	"6K":   1073,
	"7K":   1074,
	"8K":   1075,
	"9K":   1076,
	"TK":   1077,
	"JK":   1078,
	"QK":   1079,
	"A":    1080,
	"2":    1081,
	"3":    1082,
	"4":    1083,
	"5":    1084,
	"6":    1085,
	"7":    1086,
	"8":    1087,
	"9":    1088,
	"T":    1089,
	"J":    1090,
	"Q":    1091,
	"K":    1092,
}
